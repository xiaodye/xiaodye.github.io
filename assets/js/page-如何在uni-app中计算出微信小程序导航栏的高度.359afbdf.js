(window.webpackJsonp=window.webpackJsonp||[]).push([[20],{528:function(t,s,a){"use strict";a.r(s);var n=a(1),e=Object(n.a)({},(function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("h2",{attrs:{id:"为什么要拿到导航栏的高度"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#为什么要拿到导航栏的高度"}},[t._v("#")]),t._v(" 为什么要拿到导航栏的高度")]),t._v(" "),a("p",[t._v("拿到导航栏的高度当然是为了"),a("strong",[t._v("自定义导航栏")]),t._v("，"),a("code",[t._v("uniapp")]),t._v("默认为我们提供了一个导航栏，也就是每个页面上面的标题，但如果对这个默认的导航栏不满意，我们就可以选择自定义导航栏，比如我在下面，为了满足业务需求，放了一个搜索框，取代了原先的标题栏。")]),t._v(" "),a("p",[a("img",{attrs:{src:"https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/0815c92e235e44b4978d8e09c03caea0~tplv-k3u1fbpfcp-zoom-1.image",alt:"image-20220319133342326",loading:"lazy"}})]),t._v(" "),a("p",[t._v("不仅仅是在导航栏放放东西，如果你要导航栏"),a("strong",[t._v("自定义大背景")]),t._v("，也需要自定义导航栏，如下(图片来源网络)：")]),t._v(" "),a("p",[a("img",{attrs:{src:"https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/3086cb38c48a43bfadc55e56a54be050~tplv-k3u1fbpfcp-zoom-1.image",alt:"image-20220319133244566",loading:"lazy"}})]),t._v(" "),a("h2",{attrs:{id:"小程序头部的几个参数"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#小程序头部的几个参数"}},[t._v("#")]),t._v(" 小程序头部的几个参数")]),t._v(" "),a("p",[t._v("如果我们要开启页面自义定导航栏，以首页"),a("code",[t._v("index")]),t._v("为例，我们要在"),a("code",[t._v("pages.json")]),t._v("中加入以下代码，它默认是"),a("code",[t._v("default")]),t._v("。")]),t._v(" "),a("p",[a("img",{attrs:{src:"https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/40d41da508b14043929ff8ff1dc8a0f9~tplv-k3u1fbpfcp-zoom-1.image",alt:"image-20220319134134085",loading:"lazy"}})]),t._v(" "),a("p",[t._v("我们再来看看几个参数")]),t._v(" "),a("ul",[a("li",[t._v("头部高度")]),t._v(" "),a("li",[t._v("状态栏高度")]),t._v(" "),a("li",[t._v("导航栏高度（标题栏高度）")]),t._v(" "),a("li",[t._v("微信小程序小胶囊的位置信息")])]),t._v(" "),a("h3",{attrs:{id:"头部高度"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#头部高度"}},[t._v("#")]),t._v(" 头部高度")]),t._v(" "),a("p",[t._v("我们可以把小程序页面分为三块，一个是页面的"),a("code",[t._v("头部")]),t._v("，就是图片所示的部分，还有就是页面的"),a("code",[t._v("主体")]),t._v("，平时我们写代码那块，最后就是"),a("code",[t._v("尾部tabbar")]),t._v("那块。")]),t._v(" "),a("p",[a("img",{attrs:{src:"https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/cd28af3a6d984608a5b10aa962371adb~tplv-k3u1fbpfcp-zoom-1.image",alt:"image-20220319131537760",loading:"lazy"}})]),t._v(" "),a("h3",{attrs:{id:"状态栏高度"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#状态栏高度"}},[t._v("#")]),t._v(" 状态栏高度")]),t._v(" "),a("p",[t._v("状态栏就是我们手机显示电量，wifi的那部分，也算是头部的组成之一。这个"),a("code",[t._v("状态栏高度")]),t._v("我们可以很轻易地就能拿到，也就是调用"),a("code",[t._v("uni.getSystemInfoSync().statusBarHeight")]),t._v("。")]),t._v(" "),a("p",[a("img",{attrs:{src:"https://s2.loli.net/2022/03/19/fCFYk9Z6OVIeAiK.png",alt:"image-20220319185737373",loading:"lazy"}})]),t._v(" "),a("h3",{attrs:{id:"导航栏高度-标题栏"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#导航栏高度-标题栏"}},[t._v("#")]),t._v(" 导航栏高度（标题栏）")]),t._v(" "),a("p",[t._v("导航栏就是默认的标题栏，微信小程序的小胶囊是在导航栏垂直居中的，我们要说的就是算导航栏的高度。")]),t._v(" "),a("p",[a("img",{attrs:{src:"https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/601aab9d6bf94c98b2d113c04fc23ab1~tplv-k3u1fbpfcp-zoom-1.image",alt:"image-20220319135352677",loading:"lazy"}})]),t._v(" "),a("p",[t._v("这个我们在不能在"),a("code",[t._v("uniapp")]),t._v("中直接拿到，可以看看官方的文档，我们要拿的就是"),a("code",[t._v("微信小程序")]),t._v("的导航栏高度。")]),t._v(" "),a("p",[a("img",{attrs:{src:"https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/0a0012a3d1a84fb1acdfd680ef066c76~tplv-k3u1fbpfcp-zoom-1.image",alt:"image-20220319135809448",loading:"lazy"}})]),t._v(" "),a("h3",{attrs:{id:"微信小程序小胶囊的位置信息"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#微信小程序小胶囊的位置信息"}},[t._v("#")]),t._v(" 微信小程序小胶囊的位置信息")]),t._v(" "),a("p",[t._v("其实我们调用原生微信小程序"),a("code",[t._v("api")]),t._v("也不能直接拿到导航栏高度......，但我们可以拿到微信小程序右上角小胶囊的"),a("code",[t._v("宽高")]),t._v("和"),a("code",[t._v("定位信息")]),t._v("，我们可以调用原生微信小程序api拿到，这些信息我们后面算"),a("code",[t._v("导航栏高度")]),t._v("的时候要用到。")]),t._v(" "),a("p",[a("img",{attrs:{src:"https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/d04d9accf4a7435face863b4393498b2~tplv-k3u1fbpfcp-zoom-1.image",alt:"image-20220319140141386",loading:"lazy"}})]),t._v(" "),a("p",[a("img",{attrs:{src:"https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/68383eebc9ab470283bb79285b98fc47~tplv-k3u1fbpfcp-zoom-1.image",alt:"image-20220319140321949",loading:"lazy"}})]),t._v(" "),a("p",[t._v("这个小胶囊的"),a("code",[t._v("定位信息")]),t._v("是相对于"),a("code",[t._v("小程序头部")]),t._v("来看的")]),t._v(" "),a("div",{staticClass:"language-js line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// #ifdef MP-WEIXIN")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 获取微信胶囊的位置信息 width,height,top,right,left,bottom")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" custom "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" wx"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("getMenuButtonBoundingClientRect")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// console.log(custom)")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// #endif")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br"),a("span",{staticClass:"line-number"},[t._v("4")]),a("br"),a("span",{staticClass:"line-number"},[t._v("5")]),a("br")])]),a("h2",{attrs:{id:"计算微信小程序的导航栏高度"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#计算微信小程序的导航栏高度"}},[t._v("#")]),t._v(" 计算微信小程序的导航栏高度")]),t._v(" "),a("p",[t._v("因为每一个部手机的导航栏高度是不一样的，我们应该动态的去获取导航栏的高度，像上面的搜索框，我们要怎么让搜索框和微信小胶囊垂直居中呢，因为"),a("code",[t._v("小胶囊")]),t._v("是在导航栏中垂直居中，所以我们也要让"),a("code",[t._v("搜索框")]),t._v("在导航栏中垂直居中，那么我们就要拿"),a("code",[t._v("导航栏的高度")]),t._v("，然后就可以轻松的通过"),a("code",[t._v("flex")]),t._v("布局实现垂直居中了。")]),t._v(" "),a("h3",{attrs:{id:"计算公式"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#计算公式"}},[t._v("#")]),t._v(" 计算公式")]),t._v(" "),a("p",[t._v("先看一下图吧")]),t._v(" "),a("p",[a("img",{attrs:{src:"https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/87fbf0e7d606446f8f3136f6bd9496f7~tplv-k3u1fbpfcp-zoom-1.image",alt:"image-20220319141800793",loading:"lazy"}})]),t._v(" "),a("p",[t._v("因为小胶囊在导航栏中是垂直居中的，所以说，小胶囊距离导航栏顶部的距离和距离底部的距离是一样的，由此我们可以推算出计算公式：")]),t._v(" "),a("ul",[a("li",[a("code",[t._v("导航栏的高度")]),t._v(" = 胶囊高度 + (顶部距离 - 状态栏高度) * 2")]),t._v(" "),a("li",[a("code",[t._v("头部高度")]),t._v(" = 导航栏高度 + 状态栏高度")])]),t._v(" "),a("p",[t._v("然后我的建议是可以把这写参数封装在"),a("code",[t._v("uniapp")]),t._v("的全局的变量"),a("code",[t._v("globalData")]),t._v("中，哪个页面要用就可以直接拿，而且拿起来也非常方便。")]),t._v(" "),a("p",[t._v("我们不需要用"),a("code",[t._v("vuex")]),t._v("去管理，因为这个一开始就确立的，后面不用改，并不涉及"),a("code",[t._v("状态管理")]),t._v("。")]),t._v(" "),a("h2",{attrs:{id:"代码实现"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#代码实现"}},[t._v("#")]),t._v(" 代码实现")]),t._v(" "),a("p",[t._v("最后，再来看看我写的代码吧。")]),t._v(" "),a("p",[a("code",[t._v("App.vue")]),t._v("：")]),t._v(" "),a("div",{staticClass:"language-js line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("script"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("export")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("default")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("globalData")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("statusBarHeight")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 状态导航栏高度")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("navHeight")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 总体高度")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("navigationBarHeight")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 导航栏高度(标题栏高度)")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token function-variable function"}},[t._v("onLaunch")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    console"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"App Launch"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 状态栏高度")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("globalData"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("statusBarHeight "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" uni"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("getSystemInfoSync")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("statusBarHeight\n\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// #ifdef MP-WEIXIN")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 获取微信胶囊的位置信息 width,height,top,right,left,bottom")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" custom "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" wx"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("getMenuButtonBoundingClientRect")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// console.log(custom)")]),t._v("\n\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 导航栏高度(标题栏高度) = 胶囊高度 + (顶部距离 - 状态栏高度) * 2")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("globalData"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("navigationBarHeight "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" custom"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("height "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("custom"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("top "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("globalData"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("statusBarHeight"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("2")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v('// console.log("导航栏高度："+this.globalData.navigationBarHeight)')]),t._v("\n\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 总体高度 = 状态栏高度 + 导航栏高度")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("globalData"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("navHeight "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("globalData"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("navigationBarHeight "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("globalData"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("statusBarHeight\n\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// #endif")]),t._v("\n\n    console"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("globalData"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token function-variable function"}},[t._v("onShow")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    console"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"App Show"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token function-variable function"}},[t._v("onHide")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    console"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"App Hide"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("script"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br"),a("span",{staticClass:"line-number"},[t._v("4")]),a("br"),a("span",{staticClass:"line-number"},[t._v("5")]),a("br"),a("span",{staticClass:"line-number"},[t._v("6")]),a("br"),a("span",{staticClass:"line-number"},[t._v("7")]),a("br"),a("span",{staticClass:"line-number"},[t._v("8")]),a("br"),a("span",{staticClass:"line-number"},[t._v("9")]),a("br"),a("span",{staticClass:"line-number"},[t._v("10")]),a("br"),a("span",{staticClass:"line-number"},[t._v("11")]),a("br"),a("span",{staticClass:"line-number"},[t._v("12")]),a("br"),a("span",{staticClass:"line-number"},[t._v("13")]),a("br"),a("span",{staticClass:"line-number"},[t._v("14")]),a("br"),a("span",{staticClass:"line-number"},[t._v("15")]),a("br"),a("span",{staticClass:"line-number"},[t._v("16")]),a("br"),a("span",{staticClass:"line-number"},[t._v("17")]),a("br"),a("span",{staticClass:"line-number"},[t._v("18")]),a("br"),a("span",{staticClass:"line-number"},[t._v("19")]),a("br"),a("span",{staticClass:"line-number"},[t._v("20")]),a("br"),a("span",{staticClass:"line-number"},[t._v("21")]),a("br"),a("span",{staticClass:"line-number"},[t._v("22")]),a("br"),a("span",{staticClass:"line-number"},[t._v("23")]),a("br"),a("span",{staticClass:"line-number"},[t._v("24")]),a("br"),a("span",{staticClass:"line-number"},[t._v("25")]),a("br"),a("span",{staticClass:"line-number"},[t._v("26")]),a("br"),a("span",{staticClass:"line-number"},[t._v("27")]),a("br"),a("span",{staticClass:"line-number"},[t._v("28")]),a("br"),a("span",{staticClass:"line-number"},[t._v("29")]),a("br"),a("span",{staticClass:"line-number"},[t._v("30")]),a("br"),a("span",{staticClass:"line-number"},[t._v("31")]),a("br"),a("span",{staticClass:"line-number"},[t._v("32")]),a("br"),a("span",{staticClass:"line-number"},[t._v("33")]),a("br"),a("span",{staticClass:"line-number"},[t._v("34")]),a("br"),a("span",{staticClass:"line-number"},[t._v("35")]),a("br"),a("span",{staticClass:"line-number"},[t._v("36")]),a("br"),a("span",{staticClass:"line-number"},[t._v("37")]),a("br")])]),a("p",[t._v("我们可以做的更好些，把这个封装到"),a("code",[t._v("mixin.js")]),t._v("，我们哪个页面要用这些参数，就直接导入"),a("code",[t._v("混入")]),t._v("，然后在生命周期"),a("code",[t._v("onLoad")]),t._v("中调用下就好了。")]),t._v(" "),a("p",[a("code",[t._v("mixin.js")]),t._v("：")]),t._v(" "),a("div",{staticClass:"language-js line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("export")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" systemInfo "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token function-variable function"}},[t._v("data")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("statusBarHeight")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("navigationBarHeight")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("navHeight")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("windowHeight")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 可使用窗口高度")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n\n  "),a("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("methods")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 获取设备信息")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("getSystemInfo")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("statusBarHeight "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("getApp")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("globalData"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("statusBarHeight\n      "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("navigationBarHeight "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("getApp")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("globalData"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("navigationBarHeight\n      "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("windowHeight "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" uni"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("getSystemInfoSync")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("windowHeight\n      "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("navHeight "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("getApp")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("globalData"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("navHeight\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br"),a("span",{staticClass:"line-number"},[t._v("4")]),a("br"),a("span",{staticClass:"line-number"},[t._v("5")]),a("br"),a("span",{staticClass:"line-number"},[t._v("6")]),a("br"),a("span",{staticClass:"line-number"},[t._v("7")]),a("br"),a("span",{staticClass:"line-number"},[t._v("8")]),a("br"),a("span",{staticClass:"line-number"},[t._v("9")]),a("br"),a("span",{staticClass:"line-number"},[t._v("10")]),a("br"),a("span",{staticClass:"line-number"},[t._v("11")]),a("br"),a("span",{staticClass:"line-number"},[t._v("12")]),a("br"),a("span",{staticClass:"line-number"},[t._v("13")]),a("br"),a("span",{staticClass:"line-number"},[t._v("14")]),a("br"),a("span",{staticClass:"line-number"},[t._v("15")]),a("br"),a("span",{staticClass:"line-number"},[t._v("16")]),a("br"),a("span",{staticClass:"line-number"},[t._v("17")]),a("br"),a("span",{staticClass:"line-number"},[t._v("18")]),a("br"),a("span",{staticClass:"line-number"},[t._v("19")]),a("br")])]),a("p",[a("img",{attrs:{src:"https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/ad02a8af51ce43c4866d36b87bb12f69~tplv-k3u1fbpfcp-zoom-1.image",alt:"image-20220319150304609",loading:"lazy"}})]),t._v(" "),a("h2",{attrs:{id:"补充"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#补充"}},[t._v("#")]),t._v(" 补充")]),t._v(" "),a("p",[a("strong",[t._v("还有一个点要说的是")]),t._v("：我为什么不在"),a("code",[t._v("globalData")]),t._v("中直接去拿可使用窗口高度"),a("code",[t._v("windowHeight")]),t._v("呢？")]),t._v(" "),a("p",[t._v("这也是我踩的一个坑，我们讲讲"),a("code",[t._v("可使用窗口高度")]),t._v("，我们不定义导航栏，那么")]),t._v(" "),a("ul",[a("li",[a("code",[t._v("windowHeight")]),t._v(" = 屏幕高度 - "),a("code",[t._v("tabbar高度")]),t._v(" -  头部高度")])]),t._v(" "),a("p",[t._v("如果我们自定义了导航栏，则")]),t._v(" "),a("ul",[a("li",[a("code",[t._v("windowHeight")]),t._v(" = 屏幕高度 - "),a("code",[t._v("tabbar高度")])])]),t._v(" "),a("p",[t._v("我们并不是每个页面的都要自定义导航栏，那么，每个页面的"),a("code",[t._v("windowHeight")]),t._v("是有所不同的，所以说，我们不能在小程序加载后，就定死"),a("code",[t._v("windowHeight")]),t._v("，我们应该根据每个页面去拿"),a("code",[t._v("windowHeight")]),t._v("。")]),t._v(" "),a("h2",{attrs:{id:"结语"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#结语"}},[t._v("#")]),t._v(" 结语")]),t._v(" "),a("p",[t._v("感谢读完本篇文章，希望对你能有所帮助，如有问题欢迎各位在评论区指正。")]),t._v(" "),a("p",[t._v("创作不易，希望可以点个赞支持一下❤️❤️。")])])}),[],!1,null,null,null);s.default=e.exports}}]);